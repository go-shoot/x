@media (max-width:630px) {
    .part-mag:has(label:first-of-type :checked)::before,
    label:has(+label>:checked)::before {
        content: '\e00c'; --h: 0; --s: 0%; 
    }
    label:has(:checked)+label::before,
    .part-mag:has(label:last-of-type :checked)::after {
        content: '\e00b'; --h: 0; --s: 0%; 
    }
    label:has(+label>:checked) {
        display: inline-block; --h: 220; --s: 60%; 
    }
    label:has(:checked)+label, .part-mag::after {
        display: inline-block; --h: 40; --s: 60%; 
        margin-left: .2em; 
    }
    continuous-knob {display: none;}
}

section {
    font-size: calc(var(--font,1.2)*1em); 
    padding: 2rem 0; 
}
details {
    position: relative; 
    user-select: none; -webkit-user-select: none; 
    transform: translateY(-100%); max-height:0;
    transition: transform .5s, max-height .5s;

    &.showing {transform: none; max-height:50em;}
    
    summary {
        position: absolute !important; left: 1.5em; bottom: -1.5em; 
        width: 1.2em; height: 2.4em; 
        border-bottom-left-radius: 9em; border-bottom-right-radius: 9em; 
        background: var(--theme); color: black; 
        display: flex; flex-direction: column; justify-content: end; 
        touch-action: none; 
        line-height: 1.5; 
        z-index: 1; 
        transition: opacity .5s, height .5s !important; 

        .showing & {height: calc(2.4em + 100%);}
        &::before,&::after {
            line-height: .6; color: var(--theme-alt);
        }
        &::before {content: '\e00d';}
        &::after  {content: '\e00e';}
    }
    p {
        text-align: justify; line-height: 1.5; font-size: .9em; 
        padding: 0 .5em 0 3.5em; 
        transition: opacity .5s;
    }
    img:only-of-type {
        width: 90%; max-width: 30em; 
        margin: 1em 0; 
        display: block; 
    }
    &:not(.showing) p, &:not(.showing) summary::before,
    &.showing summary::after {
        opacity: 0;
    }
}

nav:has(.filter.blade) {
    grid-template: 1.7rem 1.7rem / 3em 3fr 2fr auto; 
    @media (min-width: 631px) {grid-template: 1.7rem 1.7rem / 3em auto 1fr auto;}

    .sorter {
        grid-area: 1/3/1/5; 
        @media (max-width:630px) {
            margin-right: 3em !important; 
        }
    }
}
.sorter {grid-area: 1/3/1/4;}
.filter {
    &#group {grid-area: 1/2/1/3;}
    &#type  {grid-area: 2/2/2/3;}
    &#spin,&#prefix {grid-area: 2/3/2/4;}
}
nav fieldset {
    margin-right: auto; padding-right: .6em; 
    display: flex; align-items: center; 
    white-space: nowrap; 
    overflow: scroll hidden; 
    background: var(--overlay2); 
    border-radius: 9em; 
    line-height: 1.8rem; 
    max-width: 100%;
    --color: hsl(var(--hue), 90%, calc(50% + var(--b-adj)));

    label img {
        height: 1.2em; 
        margin-top: .05em; 
    }
    legend {
        float: left;
        padding: 0 0 0 .2em;
        min-width: 2.8em; height: 100%; 
        color: black; font-size: .9em;
        background: var(--color);
        border-top-left-radius: 9em; border-bottom-left-radius: 9em;

        .sorter & {background: silver;}
        .filter:not(:has([value='motif'])) & {cursor: pointer;}
    }
    label {
        border-bottom: .1rem solid transparent; 
        margin-left: .3rem; padding: 0 .1rem; 
        height: 1.4rem; 
        line-height: 1.5rem;

        #type & {padding: 0;}
        &:has(:checked) {
            color: var(--theme); border-color: var(--theme); 
            filter: none; 
            
            #type & {border-color: var(--type);}
        }
        &:has([value='remake'],[value='collab'],[value='hasbro']) {
            font-size: .9em;
        }
    }
}
